#!/usr/bin/env gurax
import(util.tester) {*}

TestCase('Property') {
	DateTime.PrintPropSlots()
}

TestCase('DateTime.Create()') {
	Tester(`DateTime.Create())
	Tester(`DateTime.Create(2019))
	Tester(`DateTime.Create(2019, 5))
	Tester(`DateTime.Create(2019, 5, 21))
	Tester(`DateTime.Create(2019, 5, 21, 8))
	Tester(`DateTime.Create(2019, 5, 21, 8, 23))
	Tester(`DateTime.Create(2019, 5, 21, 8, 23, 42))
	Tester(`DateTime.Create(2019, 5, 21, 8, 23, 42, 234))
	Tester(`DateTime.Create(2019, 5, 21, 8, 23, 42, 234, 765))
	Tester(`DateTime.Create(2019, 5, nil, 8, nil, 42))
	Tester(`DateTime.Create(2019, nil, nil, nil, nil, 42))
	Tester(`DateTime.Create(year = 2019))
	Tester(`DateTime.Create(month = 5))
	Tester(`DateTime.Create(day = 21))
	Tester(`DateTime.Create(hour = 8))
	Tester(`DateTime.Create(min = 23))
	Tester(`DateTime.Create(sec = 42))
	Tester(`DateTime.Create(msec = 234))
	Tester(`DateTime.Create(usec = 765))
}

TestCase('DateTime.Create() Range Check') {
	Tester(`DateTime.Create(-1))
	Tester(`DateTime.Create(0))
	Tester(`DateTime.Create(9999))
	Tester(`DateTime.Create(10000))
	Tester(`DateTime.Create(nil, 0))
	Tester(`DateTime.Create(nil, 1))
	Tester(`DateTime.Create(nil, 12))
	Tester(`DateTime.Create(nil, 13))
	Tester(`DateTime.Create(nil, nil, 0))
	Tester(`DateTime.Create(nil, nil, 1))
	Tester(`DateTime.Create(nil, nil, 31))
	Tester(`DateTime.Create(nil, nil, 32))
	Tester(`DateTime.Create(nil, nil, nil, -1))
	Tester(`DateTime.Create(nil, nil, nil, 0))
	Tester(`DateTime.Create(nil, nil, nil, 23))
	Tester(`DateTime.Create(nil, nil, nil, 24))
	Tester(`DateTime.Create(nil, nil, nil, nil, -1))
	Tester(`DateTime.Create(nil, nil, nil, nil, 0))
	Tester(`DateTime.Create(nil, nil, nil, nil, 59))
	Tester(`DateTime.Create(nil, nil, nil, nil, 60))
	Tester(`DateTime.Create(nil, nil, nil, nil, nil, -1))
	Tester(`DateTime.Create(nil, nil, nil, nil, nil, 0))
	Tester(`DateTime.Create(nil, nil, nil, nil, nil, 59))
	Tester(`DateTime.Create(nil, nil, nil, nil, nil, 60))
	Tester(`DateTime.Create(nil, nil, nil, nil, nil, nil, -1))
	Tester(`DateTime.Create(nil, nil, nil, nil, nil, nil, 0))
	Tester(`DateTime.Create(nil, nil, nil, nil, nil, nil, 999))
	Tester(`DateTime.Create(nil, nil, nil, nil, nil, nil, 1000))
	Tester(`DateTime.Create(nil, nil, nil, nil, nil, nil, nil, -1))
	Tester(`DateTime.Create(nil, nil, nil, nil, nil, nil, nil, 0))
	Tester(`DateTime.Create(nil, nil, nil, nil, nil, nil, nil, 999))
	Tester(`DateTime.Create(nil, nil, nil, nil, nil, nil, nil, 1000))
}

TestCase('DateTime - DateTime') {
	Tester(`(DateTime('2000-12-31') - DateTime('2000-1-1')))
	Tester(`(DateTime('2001-12-31') - DateTime('2001-1-1')))
	Tester(`(DateTime('2010-12-31') - DateTime('2010-1-1')))
}

TestCase('DateTime + TimeDelta') {
	Tester(`(DateTime('2000-1-1') + TimeDelta(365)))
	Tester(`(DateTime('2000-1-1') + TimeDelta(366)))
	Tester(`(DateTime('2001-1-1') + TimeDelta(364)))
	Tester(`(DateTime('2001-1-1') + TimeDelta(365)))
	Tester(`(DateTime('2010-1-1') + TimeDelta(364)))
	Tester(`(DateTime('2010-1-1') + TimeDelta(365)))
}

TestCase('DateTime - TimeDelta') {
	Tester(`(DateTime('2000-12-31') - TimeDelta(365)))
	Tester(`(DateTime('2000-12-31') - TimeDelta(366)))
	Tester(`(DateTime('2001-12-31') - TimeDelta(364)))
	Tester(`(DateTime('2001-12-31') - TimeDelta(365)))
	Tester(`(DateTime('2010-12-31') - TimeDelta(364)))
	Tester(`(DateTime('2010-12-31') - TimeDelta(365)))
}

TestCase('Comparison') {
	Println('----')
	Tester(`(DateTime('2010-6-20') == DateTime('2010-6-20')))
	Tester(`(DateTime('2010-6-20') != DateTime('2010-6-20')))
	Tester(`(DateTime('2010-6-20') < DateTime('2010-6-20')))
	Tester(`(DateTime('2010-6-20') <= DateTime('2010-6-20')))
	Tester(`(DateTime('2010-6-20') > DateTime('2010-6-20')))
	Tester(`(DateTime('2010-6-20') >= DateTime('2010-6-20')))
	Println('----')
	Tester(`(DateTime('2010-6-20') == DateTime('2010-6-21')))
	Tester(`(DateTime('2010-6-20') != DateTime('2010-6-21')))
	Tester(`(DateTime('2010-6-20') < DateTime('2010-6-21')))
	Tester(`(DateTime('2010-6-20') <= DateTime('2010-6-21')))
	Tester(`(DateTime('2010-6-20') > DateTime('2010-6-21')))
	Tester(`(DateTime('2010-6-20') >= DateTime('2010-6-21')))
	Println('----')
	Tester(`(DateTime('2010-6-21') == DateTime('2010-6-20')))
	Tester(`(DateTime('2010-6-21') != DateTime('2010-6-20')))
	Tester(`(DateTime('2010-6-21') < DateTime('2010-6-20')))
	Tester(`(DateTime('2010-6-21') <= DateTime('2010-6-20')))
	Tester(`(DateTime('2010-6-21') > DateTime('2010-6-20')))
	Tester(`(DateTime('2010-6-21') >= DateTime('2010-6-20')))
	Println('----')
	Tester(`(DateTime('2010-6-20') == DateTime('2010-7-20')))
	Tester(`(DateTime('2010-6-20') != DateTime('2010-7-20')))
	Tester(`(DateTime('2010-6-20') < DateTime('2010-7-20')))
	Tester(`(DateTime('2010-6-20') <= DateTime('2010-7-20')))
	Tester(`(DateTime('2010-6-20') > DateTime('2010-7-20')))
	Tester(`(DateTime('2010-6-20') >= DateTime('2010-7-20')))
	Println('----')
	Tester(`(DateTime('2010-7-20') == DateTime('2010-6-20')))
	Tester(`(DateTime('2010-7-20') != DateTime('2010-6-20')))
	Tester(`(DateTime('2010-7-20') < DateTime('2010-6-20')))
	Tester(`(DateTime('2010-7-20') <= DateTime('2010-6-20')))
	Tester(`(DateTime('2010-7-20') > DateTime('2010-6-20')))
	Tester(`(DateTime('2010-7-20') >= DateTime('2010-6-20')))
	Println('----')
	Tester(`(DateTime('2010-6-20') == DateTime('2011-6-20')))
	Tester(`(DateTime('2010-6-20') != DateTime('2011-6-20')))
	Tester(`(DateTime('2010-6-20') < DateTime('2011-6-20')))
	Tester(`(DateTime('2010-6-20') <= DateTime('2011-6-20')))
	Tester(`(DateTime('2010-6-20') > DateTime('2011-6-20')))
	Tester(`(DateTime('2010-6-20') >= DateTime('2011-6-20')))
	Println('----')
	Tester(`(DateTime('2011-6-20') == DateTime('2010-6-20')))
	Tester(`(DateTime('2011-6-20') != DateTime('2010-6-20')))
	Tester(`(DateTime('2011-6-20') < DateTime('2010-6-20')))
	Tester(`(DateTime('2011-6-20') <= DateTime('2010-6-20')))
	Tester(`(DateTime('2011-6-20') > DateTime('2010-6-20')))
	Tester(`(DateTime('2011-6-20') >= DateTime('2010-6-20')))
}

TestCase('Property') {
	Println('----')
	Tester(`DateTime.Create(2019, 5, 21, 8, 23, 42, 234, 765)) {|dt|
		Tester(`dt.year)
		Tester(`dt.month)
		Tester(`dt.day)
		Tester(`dt.hour)
		Tester(`dt.min)
		Tester(`dt.sec)
		Tester(`dt.msec)
		Tester(`dt.usec)
		Tester(`dt.minsOff)
		Tester(`dt.wday)
		Tester(`dt.week)
		Tester(`dt.weekShort)
		Tester(`dt.yday)
		Tester(`dt.utc)
	}
	//Tester(`dt.unixTime)
	Println('----')
	Tester(`DateTime.Create(2019, 5, 21, 8, 23, 42, 234, 765, 60 * 9)) {|dt|
		Tester(`dt.minsOff)
		Tester(`dt.utc)
		Tester(`dt.utc.year)
		Tester(`dt.utc.month)
		Tester(`dt.utc.day)
		Tester(`dt.utc.hour)
		Tester(`dt.utc.min)
		Tester(`dt.utc.sec)
		Tester(`dt.utc.msec)
		Tester(`dt.utc.usec)
		Tester(`dt.utc.minsOff)
		Tester(`dt.utc.wday)
		Tester(`dt.utc.week)
		Tester(`dt.utc.weekShort)
		Tester(`dt.utc.yday)
		Tester(`dt.utc.utc)
	}
}

TestCase('DateTime.FromUnixTime()') {
	Tester(`DateTime.FromUnixTime(0):utc)
	Tester(`DateTime.FromUnixTime(100000000):utc)
	Tester(`DateTime.FromUnixTime(1000000000):utc)
	Tester(`DateTime.FromUnixTime(1234567890):utc)
	Tester(`DateTime.FromUnixTime(0x7fffffff):utc)
	Tester(`DateTime.FromUnixTime(0x80000000):utc)
	Tester(`DateTime.FromUnixTime(0xffffffff):utc)
	Tester(`DateTime.FromUnixTime(0x100000000):utc)
	Tester(`DateTime.FromUnixTime(0x700000000):utc)
	Tester(`DateTime.FromUnixTime(100000000).unixTime)
	Tester(`DateTime.FromUnixTime(1000000000).unixTime)
	Tester(`DateTime.FromUnixTime(0x80000000).unixTime)
	Tester(`DateTime.FromUnixTime(0xffffffff).unixTime)
	Tester(`DateTime.FromUnixTime(0x100000000).unixTime)
	Tester(`DateTime.FromUnixTime(0x700000000).unixTime)
}
