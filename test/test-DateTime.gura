#!/usr/bin/env gurax
import(util.tester) {*}

TestCase('Property') {
	Tester(`DateTime.__prop__(`year))
	Tester(`DateTime.__prop__(`month))
	Tester(`DateTime.__prop__(`day))
	Tester(`DateTime.__prop__(`hour))
	Tester(`DateTime.__prop__(`min))
	Tester(`DateTime.__prop__(`sec))
	Tester(`DateTime.__prop__(`msec))
	Tester(`DateTime.__prop__(`usec))
	Tester(`DateTime.__prop__(`minsOff))
	Tester(`DateTime.__prop__(`wday))
	Tester(`DateTime.__prop__(`week))
	Tester(`DateTime.__prop__(`weekShort))
	Tester(`DateTime.__prop__(`yday))
	Tester(`DateTime.__prop__(`utc))
	Tester(`DateTime.__prop__(`unixTime))
}

TestCase('Constructor') {
	Tester(`DateTime())
	Tester(`DateTime(2019))
	Tester(`DateTime(2019, 5))
	Tester(`DateTime(2019, 5, 21))
	Tester(`DateTime(2019, 5, 21, 8))
	Tester(`DateTime(2019, 5, 21, 8, 23))
	Tester(`DateTime(2019, 5, 21, 8, 23, 42))
	Tester(`DateTime(2019, 5, 21, 8, 23, 42, 234))
	Tester(`DateTime(2019, 5, 21, 8, 23, 42, 234, 765))
	Tester(`DateTime(2019, 5, nil, 8, nil, 42))
	Tester(`DateTime(2019, nil, nil, nil, nil, 42))
	Tester(`DateTime(year = 2019))
	Tester(`DateTime(month = 5))
	Tester(`DateTime(day = 21))
	Tester(`DateTime(hour = 8))
	Tester(`DateTime(min = 23))
	Tester(`DateTime(sec = 42))
	Tester(`DateTime(msec = 234))
	Tester(`DateTime(usec = 765))
}

TestCase('Constructor Range Check') {
	Tester(`DateTime(-1))
	Tester(`DateTime(0))
	Tester(`DateTime(9999))
	Tester(`DateTime(10000))
	Tester(`DateTime(nil, 0))
	Tester(`DateTime(nil, 1))
	Tester(`DateTime(nil, 12))
	Tester(`DateTime(nil, 13))
	Tester(`DateTime(nil, nil, 0))
	Tester(`DateTime(nil, nil, 1))
	Tester(`DateTime(nil, nil, 31))
	Tester(`DateTime(nil, nil, 32))
	Tester(`DateTime(nil, nil, nil, -1))
	Tester(`DateTime(nil, nil, nil, 0))
	Tester(`DateTime(nil, nil, nil, 23))
	Tester(`DateTime(nil, nil, nil, 24))
	Tester(`DateTime(nil, nil, nil, nil, -1))
	Tester(`DateTime(nil, nil, nil, nil, 0))
	Tester(`DateTime(nil, nil, nil, nil, 59))
	Tester(`DateTime(nil, nil, nil, nil, 60))
	Tester(`DateTime(nil, nil, nil, nil, nil, -1))
	Tester(`DateTime(nil, nil, nil, nil, nil, 0))
	Tester(`DateTime(nil, nil, nil, nil, nil, 59))
	Tester(`DateTime(nil, nil, nil, nil, nil, 60))
	Tester(`DateTime(nil, nil, nil, nil, nil, nil, -1))
	Tester(`DateTime(nil, nil, nil, nil, nil, nil, 0))
	Tester(`DateTime(nil, nil, nil, nil, nil, nil, 999))
	Tester(`DateTime(nil, nil, nil, nil, nil, nil, 1000))
	Tester(`DateTime(nil, nil, nil, nil, nil, nil, nil, -1))
	Tester(`DateTime(nil, nil, nil, nil, nil, nil, nil, 0))
	Tester(`DateTime(nil, nil, nil, nil, nil, nil, nil, 999))
	Tester(`DateTime(nil, nil, nil, nil, nil, nil, nil, 1000))
}

TestCase('DateTime - DateTime') {
	Tester(`(DateTime(2000, 12, 31) - DateTime(2000, 1, 1)))
	Tester(`(DateTime(2001, 12, 31) - DateTime(2001, 1, 1)))
	Tester(`(DateTime(2010, 12, 31) - DateTime(2010, 1, 1)))
}

TestCase('DateTime + TimeDelta') {
	Tester(`(DateTime(2000, 1, 1) + TimeDelta(365)))
	Tester(`(DateTime(2000, 1, 1) + TimeDelta(366)))
	Tester(`(DateTime(2001, 1, 1) + TimeDelta(364)))
	Tester(`(DateTime(2001, 1, 1) + TimeDelta(365)))
	Tester(`(DateTime(2010, 1, 1) + TimeDelta(364)))
	Tester(`(DateTime(2010, 1, 1) + TimeDelta(365)))
}

TestCase('DateTime - TimeDelta') {
	Tester(`(DateTime(2000, 12, 31) - TimeDelta(365)))
	Tester(`(DateTime(2000, 12, 31) - TimeDelta(366)))
	Tester(`(DateTime(2001, 12, 31) - TimeDelta(364)))
	Tester(`(DateTime(2001, 12, 31) - TimeDelta(365)))
	Tester(`(DateTime(2010, 12, 31) - TimeDelta(364)))
	Tester(`(DateTime(2010, 12, 31) - TimeDelta(365)))
}

TestCase('Comparison') {
	Println('----')
	Tester(`(DateTime(2010, 6, 20) == DateTime(2010, 6, 20)))
	Tester(`(DateTime(2010, 6, 20) != DateTime(2010, 6, 20)))
	Tester(`(DateTime(2010, 6, 20) < DateTime(2010, 6, 20)))
	Tester(`(DateTime(2010, 6, 20) <= DateTime(2010, 6, 20)))
	Tester(`(DateTime(2010, 6, 20) > DateTime(2010, 6, 20)))
	Tester(`(DateTime(2010, 6, 20) >= DateTime(2010, 6, 20)))
	Println('----')
	Tester(`(DateTime(2010, 6, 20) == DateTime(2010, 6, 21)))
	Tester(`(DateTime(2010, 6, 20) != DateTime(2010, 6, 21)))
	Tester(`(DateTime(2010, 6, 20) < DateTime(2010, 6, 21)))
	Tester(`(DateTime(2010, 6, 20) <= DateTime(2010, 6, 21)))
	Tester(`(DateTime(2010, 6, 20) > DateTime(2010, 6, 21)))
	Tester(`(DateTime(2010, 6, 20) >= DateTime(2010, 6, 21)))
	Println('----')
	Tester(`(DateTime(2010, 6, 21) == DateTime(2010, 6, 20)))
	Tester(`(DateTime(2010, 6, 21) != DateTime(2010, 6, 20)))
	Tester(`(DateTime(2010, 6, 21) < DateTime(2010, 6, 20)))
	Tester(`(DateTime(2010, 6, 21) <= DateTime(2010, 6, 20)))
	Tester(`(DateTime(2010, 6, 21) > DateTime(2010, 6, 20)))
	Tester(`(DateTime(2010, 6, 21) >= DateTime(2010, 6, 20)))
	Println('----')
	Tester(`(DateTime(2010, 6, 20) == DateTime(2010, 7, 20)))
	Tester(`(DateTime(2010, 6, 20) != DateTime(2010, 7, 20)))
	Tester(`(DateTime(2010, 6, 20) < DateTime(2010, 7, 20)))
	Tester(`(DateTime(2010, 6, 20) <= DateTime(2010, 7, 20)))
	Tester(`(DateTime(2010, 6, 20) > DateTime(2010, 7, 20)))
	Tester(`(DateTime(2010, 6, 20) >= DateTime(2010, 7, 20)))
	Println('----')
	Tester(`(DateTime(2010, 7, 20) == DateTime(2010, 6, 20)))
	Tester(`(DateTime(2010, 7, 20) != DateTime(2010, 6, 20)))
	Tester(`(DateTime(2010, 7, 20) < DateTime(2010, 6, 20)))
	Tester(`(DateTime(2010, 7, 20) <= DateTime(2010, 6, 20)))
	Tester(`(DateTime(2010, 7, 20) > DateTime(2010, 6, 20)))
	Tester(`(DateTime(2010, 7, 20) >= DateTime(2010, 6, 20)))
	Println('----')
	Tester(`(DateTime(2010, 6, 20) == DateTime(2011, 6, 20)))
	Tester(`(DateTime(2010, 6, 20) != DateTime(2011, 6, 20)))
	Tester(`(DateTime(2010, 6, 20) < DateTime(2011, 6, 20)))
	Tester(`(DateTime(2010, 6, 20) <= DateTime(2011, 6, 20)))
	Tester(`(DateTime(2010, 6, 20) > DateTime(2011, 6, 20)))
	Tester(`(DateTime(2010, 6, 20) >= DateTime(2011, 6, 20)))
	Println('----')
	Tester(`(DateTime(2011, 6, 20) == DateTime(2010, 6, 20)))
	Tester(`(DateTime(2011, 6, 20) != DateTime(2010, 6, 20)))
	Tester(`(DateTime(2011, 6, 20) < DateTime(2010, 6, 20)))
	Tester(`(DateTime(2011, 6, 20) <= DateTime(2010, 6, 20)))
	Tester(`(DateTime(2011, 6, 20) > DateTime(2010, 6, 20)))
	Tester(`(DateTime(2011, 6, 20) >= DateTime(2010, 6, 20)))
}

TestCase('Property') {
	Println('----')
	Tester(`DateTime(2019, 5, 21, 8, 23, 42, 234, 765)) {|dt|
		Tester(`dt.year)
		Tester(`dt.month)
		Tester(`dt.day)
		Tester(`dt.hour)
		Tester(`dt.min)
		Tester(`dt.sec)
		Tester(`dt.msec)
		Tester(`dt.usec)
		Tester(`dt.minsOff)
		Tester(`dt.wday)
		Tester(`dt.week)
		Tester(`dt.weekShort)
		Tester(`dt.yday)
		Tester(`dt.utc)
	}
	//Tester(`dt.unixTime)
	Println('----')
	Tester(`DateTime(2019, 5, 21, 8, 23, 42, 234, 765, 60 * 9)) {|dt|
		Tester(`dt.minsOff)
		Tester(`dt.utc)
		Tester(`dt.utc.year)
		Tester(`dt.utc.month)
		Tester(`dt.utc.day)
		Tester(`dt.utc.hour)
		Tester(`dt.utc.min)
		Tester(`dt.utc.sec)
		Tester(`dt.utc.msec)
		Tester(`dt.utc.usec)
		Tester(`dt.utc.minsOff)
		Tester(`dt.utc.wday)
		Tester(`dt.utc.week)
		Tester(`dt.utc.weekShort)
		Tester(`dt.utc.yday)
		Tester(`dt.utc.utc)
	}
}
