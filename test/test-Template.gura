#!/usr/bin/env gurax
import(util.tester) {*}

TestCase('Basic test') {
	test(text:String) = {
		Printf('\'%s\' -> \'%s\'\n', text, text.Embed())
		Println()
	}
	test('')
	test('a')
	test(R'''${repeat (10){|i|}}item#${i}${end}''')
	test(R'''
	${repeat (10){|i|}}
	item#${i}
	${end}
	''')
	test(R'''
	${repeat (10){|i|}}item#${i}
	${end}
	''')
	test(R'''
	${repeat (10){|i|}}
	  item#${i}
	${end}
	''')
	test(R'''${for (i in 0..9)}item${i}${end}''')
	test(R'''
	${for (i in 0..9)}
	item${i}
	${end}''')
	test(R'''
	${for (i in 0..9)}
	  item${i}
	${end}
	''')
	test(R'''${for (i in 0..9)}${if (i % 2 == 0)}item${i}${end}${end}''')
	test(R'''
	${for (i in 0..9)}
	  ${if (i % 2 == 0)}
	    item${i}
	  ${end}
	${end}''')
	test(R'''
	${for (i in 0..9)}
	  ${if (i % 2 == 0)}
	    ${i} is even
	  ${else}
	    ${i} is odd
	  ${end}
	${end}''')
	test(R'''
	${for (i in 0..9)}
	  ${if (i % 2 == 0)}
	    ${i} is a multiple of two
	  ${elsif (i % 3 == 0)}
	    ${i} is a multiple of three
	  ${else}
	    ${i} is another
	  ${end}
	${end}''')
}

TestCase('Reference to external variables') {
	
}
