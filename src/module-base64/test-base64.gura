#!/usr/bin/env gurax
//==============================================================================
// test-base64.gura
//==============================================================================
import(util.tester) {*}

TestEncDec(buffSrc:Binary) = {
	buffEnc = base64.Encode(buffSrc):base32hex
	//Printf('%s -> %s\n', buffSrc, buffEnc)
	buffDec = base64.Decode(buffEnc):base32hex
	Printf('Source:  %s\n', buffSrc)
	if (buffSrc == buffDec) {
		Printf('Encoded: %s .. OK\n', buffEnc)
	} else {
		Printf('Encoded: %s .. **NG** %s\n', buffEnc, buffDec)
	}
}

TestCase('Basic test') {
	TestEncDec(b'')
	TestEncDec(b'f')
	TestEncDec(b'fo')
	TestEncDec(b'foo')
	TestEncDec(b'foob')
	TestEncDec(b'fooba')
	TestEncDec(b'foobar')
	TestEncDec(b'abcdefghijklmnopqrstuvwxyz')
}
