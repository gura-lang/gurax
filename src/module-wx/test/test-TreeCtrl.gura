#!/usr/bin/env gurax
import(wx)
import(image)

MyApp = class(wx.App) {
	OnInit() = {
		MyFrame(path.BaseName(path.FileName(sys.argv[0])), wx.Point(50, 50), wx.Size(800, 600)).Show()
		true
	}
}

MyFrame = class(wx.Frame) {
	__init__(title as String, pos as wx.Point, size as wx.Size) = {|nil, wx.ID_ANY, title, pos, size|
		PanelTop(this)
	}
}

PanelTop = class(wx.Panel) {
	treeCtrl as wx.TreeCtrl
	textCtrl as wx.TextCtrl
	__init__(parent as wx.Window) = {|parent|
		imageList = wx.ImageList(16, 16)
		indices = InitImageList(imageList)
		sizerTop = wx.BoxSizer(wx.VERTICAL)
		this.SetSizer(sizerTop)
		wx.BoxSizer(wx.HORIZONTAL) {|hbox|
			sizerTop.Add(hbox, wx.SizerFlags(3).Expand())
			wx.TreeCtrl(this, style = wx.TR_DEFAULT_STYLE | wx.TR_EDIT_LABELS) {|ctrl|
				hbox.Add(ctrl, wx.SizerFlags(1).Expand())
				ctrl.SetImageList(imageList);
				ctrl.AddRoot('root', image = indices[`folder]) {|itemId|
					ctrl.AppendItem(itemId, 'child 1', image = indices[`page], data = 'hello 1')
					ctrl.AppendItem(itemId, 'child 2', image = indices[`folder]) {|itemId|
						ctrl.AppendItem(itemId, 'child 2-1', data = 'hello 2-1', image = indices[`page])
						ctrl.AppendItem(itemId, 'child 2-2', data = 'hello 2-2', image = indices[`page])
						ctrl.AppendItem(itemId, 'child 2-3', data = 'hello 2-3', image = indices[`page])
						ctrl.AppendItem(itemId, 'child 2-4', data = 'hello 2-4', image = indices[`page])
					}
					ctrl.AppendItem(itemId, 'child 3', image = indices[`page])
					ctrl.AppendItem(itemId, 'child 4', image = indices[`page])
					ctrl.AppendItem(itemId, 'child 5', image = indices[`folder]) {|itemId|
						ctrl.AppendItem(itemId, 'child 5-1', image = indices[`page])
						ctrl.AppendItem(itemId, 'child 5-2', image = indices[`page])
						ctrl.AppendItem(itemId, 'child 5-3', image = indices[`page])
						ctrl.AppendItem(itemId, 'child 5-4', image = indices[`page])
					}
					ctrl.AppendItem(itemId, 'child 6', image = indices[`page])
				}
				this.treeCtrl = ctrl
				wx.EVT_TREE_BEGIN_DRAG(ctrl, this.OnTree)
				wx.EVT_TREE_BEGIN_RDRAG(ctrl, this.OnTree)
				wx.EVT_TREE_END_DRAG(ctrl, this.OnTree)
				wx.EVT_TREE_BEGIN_LABEL_EDIT(ctrl, this.OnTree)
				wx.EVT_TREE_END_LABEL_EDIT(ctrl, this.OnTree)
				wx.EVT_TREE_DELETE_ITEM(ctrl, this.OnTree)
				wx.EVT_TREE_GET_INFO(ctrl, this.OnTree)
				wx.EVT_TREE_SET_INFO(ctrl, this.OnTree)
				wx.EVT_TREE_ITEM_ACTIVATED(ctrl, this.OnTree)
				wx.EVT_TREE_ITEM_COLLAPSED(ctrl, this.OnTree)
				wx.EVT_TREE_ITEM_COLLAPSING(ctrl, this.OnTree)
				wx.EVT_TREE_ITEM_EXPANDED(ctrl, this.OnTree)
				wx.EVT_TREE_ITEM_EXPANDING(ctrl, this.OnTree)
				wx.EVT_TREE_ITEM_RIGHT_CLICK(ctrl, this.OnTree)
				wx.EVT_TREE_ITEM_MIDDLE_CLICK(ctrl, this.OnTree)
				wx.EVT_TREE_SEL_CHANGED(ctrl, this.OnTree)
				wx.EVT_TREE_SEL_CHANGING(ctrl, this.OnTree)
				wx.EVT_TREE_KEY_DOWN(ctrl, this.OnTreeKeyDown)
				wx.EVT_TREE_ITEM_GETTOOLTIP(ctrl, this.OnTreeItemGetToolTip)
				wx.EVT_TREE_ITEM_MENU(ctrl, this.OnTree)
				wx.EVT_TREE_STATE_IMAGE_CLICK(ctrl, this.OnTree)
			}
			wx.TreeCtrl(this, style = wx.TR_DEFAULT_STYLE | wx.TR_EDIT_LABELS) {|ctrl|
				hbox.Add(ctrl, wx.SizerFlags(1).Expand())
				ctrl.SetImageList(imageList);
				ctrl.SetIndent(50)
				ctrl.AddRoot('root', image = indices[`folder]) {|itemId|
					ctrl.AppendItem(itemId, 'child 1', image = indices[`page], data = 'hello 1')
					ctrl.AppendItem(itemId, 'child 2', image = indices[`folder]) {|itemId|
						ctrl.AppendItem(itemId, 'child 2-1', data = 'hello 2-1', image = indices[`page])
						ctrl.AppendItem(itemId, 'child 2-2', data = 'hello 2-2', image = indices[`page])
						ctrl.AppendItem(itemId, 'child 2-3', data = 'hello 2-3', image = indices[`page])
						ctrl.AppendItem(itemId, 'child 2-4', data = 'hello 2-4', image = indices[`page])
					}
					ctrl.AppendItem(itemId, 'child 3', image = indices[`page])
					ctrl.AppendItem(itemId, 'child 4', image = indices[`page])
					ctrl.AppendItem(itemId, 'child 5', image = indices[`folder]) {|itemId|
						ctrl.AppendItem(itemId, 'child 5-1', image = indices[`page])
						ctrl.AppendItem(itemId, 'child 5-2', image = indices[`page])
						ctrl.AppendItem(itemId, 'child 5-3', image = indices[`page])
						ctrl.AppendItem(itemId, 'child 5-4', image = indices[`page])
						ctrl.Expand(itemId)
					}
					ctrl.AppendItem(itemId, 'child 6', image = indices[`page])
					ctrl.Expand(itemId)
				}
			}
		}
		wx.TextCtrl(this, wx.ID_ANY, style = wx.TE_MULTILINE) {|ctrl|
			sizerTop.Add(ctrl, wx.SizerFlags(1).Expand())
			this.textCtrl = ctrl
		}
	}
	OnTree(event) = {
		this.PrintTreeEvent(event)
	}
	OnTreeKeyDown(event) = {
		eventName = event.GetEventType().name
		//this.Printf('%s(%s)\n', eventName, event.GetKeyEvent())
		this.Printf('%s(%d)\n', eventName, event.GetKeyCode())
	}
	OnTreeItemGetToolTip(event) = {
		this.PrintTreeEvent(event)
		itemId = event.GetItem()
		event.SetToolTip(this.treeCtrl.GetItemText(itemId))
	}
	PrintTreeEvent(event) = {
		eventName = event.GetEventType().name
		itemId = event.GetItem()
		this.Printf('%s(\'%s\')\n', eventName, this.treeCtrl.GetItemText(itemId))
	}
	Printf(format as String, args*) = this.textCtrl.WriteText(Format(format, args*))
}

InitImageList(imageList as wx.ImageList) = {
	indices = %{}
	//indices[`action_back]				= imageList.Add(image.action_back)
	//indices[`action_forward]			= imageList.Add(image.action_forward)
	//indices[`action_go]					= imageList.Add(image.action_go)
	//indices[`action_paste]				= imageList.Add(image.action_paste)
	//indices[`action_print]				= imageList.Add(image.action_print)
	//indices[`action_refresh]			= imageList.Add(image.action_refresh)
	//indices[`action_refresh_blue]		= imageList.Add(image.action_refresh_blue)
	//indices[`action_save]				= imageList.Add(image.action_save)
	//indices[`action_stop]				= imageList.Add(image.action_stop)
	indices[`application_dreamweaver]	= imageList.Add(image.application_dreamweaver)
	//indices[`application_firefox]		= imageList.Add(image.application_firefox)
	indices[`application_flash]			= imageList.Add(image.application_flash)
	//indices[`arrow_down]				= imageList.Add(image.arrow_down)
	indices[`arrow_left]				= imageList.Add(image.arrow_left)
	indices[`arrow_right]				= imageList.Add(image.arrow_right)
	//indices[`arrow_up]					= imageList.Add(image.arrow_up)
	//indices[`box]						= imageList.Add(image.box)
	//indices[`calendar]					= imageList.Add(image.calendar)
	//indices[`comment]					= imageList.Add(image.comment)
	//indices[`comment_blue]				= imageList.Add(image.comment_blue)
	//indices[`comment_delete]			= imageList.Add(image.comment_delete)
	//indices[`comment_new]				= imageList.Add(image.comment_new)
	//indices[`comment_yellow]			= imageList.Add(image.comment_yellow)
	//indices[`copy]						= imageList.Add(image.copy)
	//indices[`cut]						= imageList.Add(image.cut)
	//indices[`date]						= imageList.Add(image.date)
	//indices[`date_delete]				= imageList.Add(image.date_delete)
	//indices[`date_new]					= imageList.Add(image.date_new)
	//indices[`file_acrobat]				= imageList.Add(image.file_acrobat)
	//indices[`file_font]					= imageList.Add(image.file_font)
	//indices[`file_font_truetype]		= imageList.Add(image.file_font_truetype)
	//indices[`flag_blue]					= imageList.Add(image.flag_blue)
	//indices[`flag_green]				= imageList.Add(image.flag_green)
	//indices[`flag_orange]				= imageList.Add(image.flag_orange)
	//indices[`flag_red]					= imageList.Add(image.flag_red)
	//indices[`flag_white]				= imageList.Add(image.flag_white)
	indices[`folder]					= imageList.Add(image.folder)
	//indices[`folder_delete]				= imageList.Add(image.folder_delete)
	//indices[`folder_images]				= imageList.Add(image.folder_images)
	//indices[`folder_lock]				= imageList.Add(image.folder_lock)
	//indices[`folder_new]				= imageList.Add(image.folder_new)
	//indices[`folder_page]				= imageList.Add(image.folder_page)
	//indices[`icon_accept]				= imageList.Add(image.icon_accept)
	//indices[`icon_airmail]				= imageList.Add(image.icon_airmail)
	//indices[`icon_alert]				= imageList.Add(image.icon_alert)
	//indices[`icon_attachment]			= imageList.Add(image.icon_attachment)
	//indices[`icon_clock]				= imageList.Add(image.icon_clock)
	//indices[`icon_component]			= imageList.Add(image.icon_component)
	//indices[`icon_download]				= imageList.Add(image.icon_download)
	//indices[`icon_email]				= imageList.Add(image.icon_email)
	//indices[`icon_extension]			= imageList.Add(image.icon_extension)
	//indices[`icon_favourites]			= imageList.Add(image.icon_favourites)
	//indices[`icon_get_world]			= imageList.Add(image.icon_get_world)
	//indices[`icon_history]				= imageList.Add(image.icon_history)
	//indices[`icon_home]					= imageList.Add(image.icon_home)
	//indices[`icon_info]					= imageList.Add(image.icon_info)
	//indices[`icon_key]					= imageList.Add(image.icon_key)
	//indices[`icon_link]					= imageList.Add(image.icon_link)
	//indices[`icon_mail]					= imageList.Add(image.icon_mail)
	//indices[`icon_monitor_mac]			= imageList.Add(image.icon_monitor_mac)
	//indices[`icon_monitor_pc]			= imageList.Add(image.icon_monitor_pc)
	//indices[`icon_network]				= imageList.Add(image.icon_network)
	//indices[`icon_package]				= imageList.Add(image.icon_package)
	//indices[`icon_package_get]			= imageList.Add(image.icon_package_get)
	//indices[`icon_package_open]			= imageList.Add(image.icon_package_open)
	//indices[`icon_padlock]				= imageList.Add(image.icon_padlock)
	//indices[`icon_security]				= imageList.Add(image.icon_security)
	//indices[`icon_settings]				= imageList.Add(image.icon_settings)
	//indices[`icon_user]					= imageList.Add(image.icon_user)
	//indices[`icon_wand]					= imageList.Add(image.icon_wand)
	//indices[`icon_world]				= imageList.Add(image.icon_world)
	//indices[`icon_world_dynamic]		= imageList.Add(image.icon_world_dynamic)
	//indices[`image]						= imageList.Add(image.image)
	//indices[`image_new]					= imageList.Add(image.image_new)
	//indices[`interface_browser]			= imageList.Add(image.interface_browser)
	//indices[`interface_dialog]			= imageList.Add(image.interface_dialog)
	//indices[`interface_installer]		= imageList.Add(image.interface_installer)
	//indices[`list_comments]				= imageList.Add(image.list_comments)
	//indices[`list_components]			= imageList.Add(image.list_components)
	//indices[`list_errors]				= imageList.Add(image.list_errors)
	//indices[`list_extensions]			= imageList.Add(image.list_extensions)
	//indices[`list_images]				= imageList.Add(image.list_images)
	//indices[`list_keys]					= imageList.Add(image.list_keys)
	//indices[`list_links]				= imageList.Add(image.list_links)
	//indices[`list_packages]				= imageList.Add(image.list_packages)
	//indices[`list_security]				= imageList.Add(image.list_security)
	//indices[`list_settings]				= imageList.Add(image.list_settings)
	//indices[`list_users]				= imageList.Add(image.list_users)
	//indices[`list_world]				= imageList.Add(image.list_world)
	//indices[`note]						= imageList.Add(image.note)
	//indices[`note_delete]				= imageList.Add(image.note_delete)
	//indices[`note_new]					= imageList.Add(image.note_new)
	indices[`page]						= imageList.Add(image.page)
	//indices[`page_alert]				= imageList.Add(image.page_alert)
	//indices[`page_attachment]			= imageList.Add(image.page_attachment)
	//indices[`page_bookmark]				= imageList.Add(image.page_bookmark)
	//indices[`page_boy]					= imageList.Add(image.page_boy)
	//indices[`page_code]					= imageList.Add(image.page_code)
	//indices[`page_colors]				= imageList.Add(image.page_colors)
	//indices[`page_component]			= imageList.Add(image.page_component)
	//indices[`page_cross]				= imageList.Add(image.page_cross)
	//indices[`page_delete]				= imageList.Add(image.page_delete)
	//indices[`page_deny]					= imageList.Add(image.page_deny)
	//indices[`page_down]					= imageList.Add(image.page_down)
	//indices[`page_dynamic]				= imageList.Add(image.page_dynamic)
	//indices[`page_edit]					= imageList.Add(image.page_edit)
	//indices[`page_extension]			= imageList.Add(image.page_extension)
	//indices[`page_favourites]			= imageList.Add(image.page_favourites)
	//indices[`page_find]					= imageList.Add(image.page_find)
	//indices[`page_flash]				= imageList.Add(image.page_flash)
	//indices[`page_girl]					= imageList.Add(image.page_girl)
	//indices[`page_html]					= imageList.Add(image.page_html)
	//indices[`page_java]					= imageList.Add(image.page_java)
	//indices[`page_key]					= imageList.Add(image.page_key)
	//indices[`page_left]					= imageList.Add(image.page_left)
	//indices[`page_link]					= imageList.Add(image.page_link)
	//indices[`page_lock]					= imageList.Add(image.page_lock)
	//indices[`page_new]					= imageList.Add(image.page_new)
	//indices[`page_next]					= imageList.Add(image.page_next)
	//indices[`page_package]				= imageList.Add(image.page_package)
	//indices[`page_php]					= imageList.Add(image.page_php)
	//indices[`page_prev]					= imageList.Add(image.page_prev)
	//indices[`page_refresh]				= imageList.Add(image.page_refresh)
	//indices[`page_right]				= imageList.Add(image.page_right)
	//indices[`page_script]				= imageList.Add(image.page_script)
	//indices[`page_security]				= imageList.Add(image.page_security)
	//indices[`page_settings]				= imageList.Add(image.page_settings)
	//indices[`page_sound]				= imageList.Add(image.page_sound)
	//indices[`page_tag_blue]				= imageList.Add(image.page_tag_blue)
	//indices[`page_tag_red]				= imageList.Add(image.page_tag_red)
	//indices[`page_text]					= imageList.Add(image.page_text)
	//indices[`page_text_delete]			= imageList.Add(image.page_text_delete)
	//indices[`page_tick]					= imageList.Add(image.page_tick)
	//indices[`page_tree]					= imageList.Add(image.page_tree)
	//indices[`page_up]					= imageList.Add(image.page_up)
	//indices[`page_url]					= imageList.Add(image.page_url)
	//indices[`page_user]					= imageList.Add(image.page_user)
	//indices[`page_user_dark]			= imageList.Add(image.page_user_dark)
	//indices[`page_user_light]			= imageList.Add(image.page_user_light)
	//indices[`page_video]				= imageList.Add(image.page_video)
	//indices[`page_wizard]				= imageList.Add(image.page_wizard)
	//indices[`table]						= imageList.Add(image.table)
	//indices[`tables]					= imageList.Add(image.tables)
	//indices[`table_delete]				= imageList.Add(image.table_delete)
	indices
}

wx.ImplementApp(MyApp())
